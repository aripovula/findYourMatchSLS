<div>
  <div id="container" class="margintop">
    <div id="left">
      <div class="scrollDiv boxed">
        <div style="font-size: 14px;">
          <p>Voice messages are generated using Amazon Polly - voice: Salli</p>
          <p>The Lambda function (using AWS Rekognition) :
            <span class="horIndent"></span>
            <span style="font-size: 12px; color:lightseagreen"> Note: 'Rekognition' is spelled correctly - same as by AWS</span>
          </p>
          <div style="margin-left: 40px;">
            <p>1. Checks if there is any face and if any face is detected it:</p>
            <p> &nbsp; a) checks if it is a celebrity person</p>
            <p> &nbsp; b) describes the face</p>
            <p> &nbsp; c) checks if the same face is detected in any of the images</p>
            <p>2. Describes other objects detected, if any</p>
            <p>3. Immediately discards any uploaded file as its last step</p>
          </div>
          <div>
            <p>Image upload options:</p>
            Option 1.
            <button class="button button1" (click)="onWebsiteUrlClicked();">Add website image URL</button>
            <br/> Option 2.
            <button class="button button1" (click)="onSnapshotClicked();">Take a webcam photo</button>
            <br/>
            <div *ngIf="uploaderHidden">
              <br/> Option 3.
              <span class="noDecor" (click)="onImageChangeRequest()">
                <span *ngIf="imageFile.length != 0">
                  Image from local file system received - click here to change the image
                </span>
                <span *ngIf="imageFile.length == 0">
                  Add image
                </span>
              </span>
              <span class="verIndent"></span>
            </div>
            <div *ngIf="!uploaderHidden">
              Option 3:
              <image-upload class="imageUpload" buttonCaption="Upload image" dropBoxMessage="OR drop image here" [max]="1" [extensions]="['jpg','jpeg','png','gif']"
                [maxFileSize]="1048576" (uploadFinished)="onUploadFinished($event)" (uploadStateChanged)="onUploadStateChanged($event)">
              </image-upload>
            </div>

          </div>

          <div *ngIf="isWebsiteURLchosen">
            <form>
              <div id="myModal" class="modal">
                <div class="modal-content">
                  <div class="modal-header">
                    <span class="close" (click)="onWebsiteURLClose()">&times;</span>
                    <p>Image URL in another website</p>
                  </div>
                  <div class="modal-body">
                    <br/>
                    <span>Image URL: &nbsp;</span>
                    <input type="text" id="webURL" name="webURL" [(ngModel)]="webURL">
                    <!-- <span>(ngModelChange)="onWebURLChange()"</span> -->
                    <br/>
                    <br/>
                    <p style="font-size: 14px;">Please right click on an image and use 'Copy image address' and NOT 'Copy link address'</p>
                    <p style="font-size: 14px;">( image is downloaded directly by
                      <span style="color:dodgerblue">AWS Lambda</span>. Your browser sends URL only )</p>
                    <br/>
                    <button type="button" class="button button1" (click)="onWebsiteURLSubmit()">Submit</button>
                    <button type="button" class="button button1" (click)="onWebsiteURLClose()">Close</button>
                    <p style="font-size: 14px;">Select images from any legal website OR click one of links below - opens up in a NEW window</p>
                    <div style="margin-left: 40px;">
                      <a class="noDecor" href="https://www.usmagazine.com/celebrity-pictures/" target="_blank">celebrities - www.usmagazine.com</a>
                      <br/>
                      <a class="noDecor" href="https://www.glamour.com/entertainment" target="_blank">celebrities - www.glamour.com</a>
                      <br/>
                      <a class="noDecor" href="https://pixabay.com/en/photos/portrait%20face/?" target="_blank">portrait - https://pixabay.com</a>
                      <br/>
                      <a class="noDecor" href="https://www.freeimages.com/search/portrait" target="_blank">portrait - www.freeimages.com</a>
                      <br/>
                      <a class="noDecor" href="https://pixabay.com/en/photos/hobby/?" target="_blank">hobby - https://pixabay.com</a>
                      <br/>
                      <a class="noDecor" href="https://www.freeimages.com/search/hobby" target="_blank">hobby - www.freeimages.com</a>
                      <br/>
                      <a class="noDecor" href="https://pixabay.com/en/photos/sports/?" target="_blank">sports - https://pixabay.com</a>
                      <br/>
                      <a class="noDecor" href="https://www.freeimages.com/search/sports" target="_blank">sports - https://www.freeimages.com</a>
                    </div>
                    <br/>
                    <br/>
                  </div>
                </div>
              </div>
            </form>
          </div>

          <div>
            <div *ngIf="isCapturePhotoChosen">
              <form>
                <div id="myModal" class="modal">
                  <div class="modal-content">
                    <div class="modal-header">
                      <span class="close" (click)="onCapturePhotoModalClose()">&times;</span>
                      <p>Capture photo mode</p>
                    </div>
                    <div class="modal-body">
                      <div style="text-align:center">
                        <div *ngIf="!isPhotoCaptured">
                          <webcam [height]="400" [width]="400" [trigger]="triggerObservable" (imageCapture)="handleImage($event)" *ngIf="showWebcam"
                            [allowCameraSwitch]="allowCameraSwitch" [switchCamera]="nextWebcamObservable" [videoOptions]="videoOptions"
                            (initError)="handleInitError($event)">
                          </webcam>
                          <br/>
                          <button class="button button1" (click)="triggerSnapshot();">Take A Snapshot</button>
                          <button type="button" class="button button1" (click)="onCapturePhotoModalClose()">Close</button>
                          <br/>
                          <br/>
                          <p style="font-size: 12px;">* Not supported in Safari. Tested in Google Chrome.</p>
                        </div>

                        <div *ngIf="isPhotoCaptured">
                          <div class="snapshot" *ngIf="webcamImage">
                            <img height="400px" [src]="webcamImage.imageAsDataUrl" />
                          </div>
                          <br/>
                          <button type="button" class="button button1" (click)="onImageCaptureSubmitted()">Submit</button>
                          <button class="button button1" (click)="onCaptureAgainClicked();">Take A New Snapshot</button>
                          <button type="button" class="button button1" (click)="onCapturePhotoModalClose()">Cancel</button>
                          <br/>
                        </div>
                      </div>

                    </div>
                  </div>
                  <br/>
                  <br/>
                </div>
              </form>
            </div>
          </div>

          <div style="font-size: 16px">
            <div *ngIf="isNotValidImage">
              <form>
                <div id="myModal" class="modal">
                  <div class="modal-content">
                    <div class="modal-header">
                      <span class="close" (click)="onNotValidImageClose()">&times;</span>
                      <p>Image not received</p>
                    </div>
                    <div class="modal-body">
                      <div style="text-align:left">
                        <div *ngIf="isNotValidURLprovided">
                          <br/>
                          <p>Image URL is not valid !</p>
                          <p>Please right click on an image and use 'Copy image address' and NOT 'Copy link address'</p>
                        </div>
                        <div *ngIf="isNotValidImageProvided">
                          <br/>
                          <p>Image file is not valid !</p>
                          <p>Please make sure that uploaded file is of 'jpeg', 'png' or 'gif' types.</p>
                        </div>
                        <button type="button" class="button button1" (click)="onNotValidImageClose()">OK</button>
                        <br/>
                        <br/>
                      </div>

                    </div>
                  </div>
                  <br/>
                  <br/>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="right">
      <div class="scrollDiv boxed">
        <div id="container4message">
          <div id="left4message">
            <img src={{matchPersonData.image}} width="100%"> &nbsp;
            <span style="font-size: 25px; color:lightseagreen"> &nbsp; &#10149;</span>
          </div>
          <div id="right4message">
            <div class="boxMessage">
              <span>{{matchPersonData.name}}: </span>
              <br/>
              <span style="font-size: 14px;">( sent you a voice message )</span>
              <span *ngFor="let greeting of greetings; let ind=index;">
                &nbsp;
                <button class="buttonMessage" (click)="onPlayAudioClicked(greeting.url)">play audio</button>
                <br/>
                <span>{{greeting.text}}</span>
                <br/>
                <span style="font-size: 12px;">url: {{greeting.url}}</span>
              </span>
            </div>
          </div>
        </div>
        <span class="verIndent"></span>
        <div id="container4message">
          <div id="left4messageB">
            <div class="boxMessageB">
              <span>You: </span>
              <br/>
              <span style="font-size: 14px;">( sent you a voice message )</span>
              <span *ngFor="let greeting of greetings; let ind=index;">
                &nbsp;
                <button class="buttonMessage" (click)="onPlayAudioClicked(greeting.url)">play audio</button>
                <br/>
                <span>{{greeting.text}}</span>
                <br/>
                <span style="font-size: 12px;">url: {{greeting.url}}</span>
              </span>
            </div>
          </div>
          <div id="right4messageB">
            <img src="https://images.pexels.com/photos/614810/pexels-photo-614810.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" width="100%"> &nbsp;
            <!-- <span style="font-size: 34px; color:lightseagreen"> &#10149;</span> -->
          </div>
        </div>
        {{imageDescription}}
      </div>
    </div>
  </div>
